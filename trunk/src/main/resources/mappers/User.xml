<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.iyoons.world.dao.UserDAO">
	
	<select id="findUser" resultType="com.iyoons.world.vo.UserVO">
		select * from user_info where user_id=#{userId} and user_pw=#{userPw} and user_status = 1
	</select>
	
	<select id="checkUser" resultType="int">
		select count(*) from user_info where user_id=#{userId} and user_pw=#{userPw} 
	</select>
	
	<select id="userList" resultType="com.iyoons.world.vo.UserVO">
	SELECT
    	US.user_id,
    	US.user_name,
    	US.user_type,
    	US.user_status,
    	US.user_seq,
    	DP.dep_name
	FROM
	    user_info US
    	LEFT JOIN dep DP ON US.user_seq = DP.user_seq
    	/*WHERE US.user_name LIKE '%${userName}%'*/
	</select>
	
	<select id="viewUser" resultType="com.iyoons.world.vo.UserVO">
	SELECT
    	US.user_id,
    	US.user_name,
    	US.user_type,
    	US.user_status,
    	US.email,
    	US.hire_dt,
    	DP.dep_name
	FROM
	    user_info US
    	LEFT JOIN dep DP ON US.user_seq = DP.user_seq
	</select>
	
	<!-- 회원 등록  -->
	<insert id="insertUser" parameterType="com.iyoons.world.vo.UserVO">
		INSERT INTO user_info (
        	user_id,
        	user_pw,
        	user_name,
        	email,
        	user_seq
    	)
		VALUES (
    		#{userId},
 			#{userPw},
    		#{userName},
    		#{email},
    		#{userSeq}
    	 )
	</insert>
	
	<!-- 회원 수정  -->
	<update id="updateUser" parameterType="com.iyoons.world.vo.UserVO">
		UPDATE user_info SET
        	user_pw = #{userPw},
        	user_name #{userName},
        	email = #{email},
        	last_update_dt = sysdate 
    	WhERE
    		user_id = #{userId} <!-- 일련번호로 수정 -->
	</update>
	
	<!-- 회원 상세 페이지  -->
	<select id="userDetail" resultType="com.iyoons.world.vo.UserVO">
		SELECT
    		user_id,
       		user_name,
        	email,
        	user_seq
		FROM
	    	user_info
    	WhERE
    		user_id = #{userId} <!-- 일련번호로 수정 -->
	</select>
	
	
	
</mapper>